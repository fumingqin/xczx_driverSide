{"version":3,"sources":["uni-app:///main.js","webpack:///D:/HBuilderProjects/jdt-jsd/pages/ZXC/CzcPrivate.nvue?6872","webpack:///D:/HBuilderProjects/jdt-jsd/pages/ZXC/CzcPrivate.nvue?1460","webpack:///D:/HBuilderProjects/jdt-jsd/pages/ZXC/CzcPrivate.nvue?3a45","webpack:///D:/HBuilderProjects/jdt-jsd/pages/ZXC/CzcPrivate.nvue?8d3a","uni-app:///pages/ZXC/CzcPrivate.nvue","webpack:///D:/HBuilderProjects/jdt-jsd/pages/ZXC/CzcPrivate.nvue?4101","webpack:///D:/HBuilderProjects/jdt-jsd/pages/ZXC/CzcPrivate.nvue?f476","webpack:///D:/HBuilderProjects/jdt-jsd/pages/ZXC/CzcPrivate.nvue?6072","webpack:///D:/HBuilderProjects/jdt-jsd/pages/ZXC/CzcPrivate.nvue?4748"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,sG;AACAA,UAAU,CAACC,mBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;AACa;AACC;;;AAGxE;AAC4K;AAC5K,gBAAgB,sLAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,8LAEN;AACL,GAAG;AACH;AACA,WAAW,oPAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAAqpB,CAAgB,kqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8IzqB;AACA;AACA;;AAEA,0G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;msBAEA,EACA,cACA,kBADA,EAEA,kBAFA,EADA,EAKA,IALA,kBAKA,CACA,SACA,SADA,EAEA,aAFA,EAEA;AACA,kBAHA,EAGA;AACA,gBAJA,EAKA,YALA,EAMA,WANA,EAOA,aAPA,EAQA,cARA,EASA,oBATA,EAUA,gBAVA,EAWA,mBAXA,EAYA,gBACA,MADA,EAEA,MAFA,CAZA,EAgBA,sBAhBA,EAgBA;AACA,oBAjBA,EAkBA,eAlBA,EAkBA;AACA,kBAnBA,EAqBA,eArBA,EAqBA;AACA,cAtBA,EAuBA,YAvBA,EAwBA,YAxBA,EAyBA,gBAzBA,EA0BA,UA1BA,EA2BA,UA3BA,EA4BA,cA5BA,EA6BA,aA7BA,EA8BA,mBA9BA,EA+BA,eA/BA,EAgCA,mBAhCA,EAgCA;AACA,uBAjCA,EAiCA;AACA,0BAlCA,EAkCA;AACA,sBAnCA,EAmCA;AACA,wBApCA,EAoCA;AACA,wBArCA,EAqCA;AACA,qBAtCA,EAsCA;AACA,oBAvCA,EAwCA,gBAxCA,EAwCA;AACA,oBAzCA,EAyCA;AACA,iBA1CA,EA0CA;AAEA,kBA5CA,EA4CA;AACA,oBA7CA,GA+CA,CArDA,EAsDA,MAtDA,kBAsDA,MAtDA,EAsDA,CACA,gBACA,sCACA,oDACA,eACA,yBACA,kCACA,CACA,oBACA;AACA,sCACA,yCACA,gDACA,CALA,IAOA,sBACA,qBACA,CAvEA,EAwEA,QAxEA,sBAwEA,CACA,gBACA,kCACA,qCACA,sCACA,CA7EA,EA8EA,WACA,yCACA,gBACA,kBACA,aADA,EAEA,gCACA,+BACA,6BACA,CALA,IAOA,CAVA,EAWA;AACA,gIACA,gBACA,YADA,EAEA,UAFA,IAIA,CAjBA,EAmBA,+BACA,gBACA,+CACA,cACA,gFADA,EAEA,oFAFA,EAGA,QACA,6BADA,EAEA,uBAFA,EAHA,EAOA,gCACA,4BACA,sBACA,8BACA,8BACA,sCACA,0BACA,0BACA,kCACA,wBACA,gCACA,4CACA,oCACA,4CACA,wCACA,8CACA,sCACA,sCACA,kFACA,wFACA,aACA,CAnBA,MAmBA,CACA,6BACA,CACA,CA/BA,EAgCA,0BACA,YADA,CAEA;AACA,qCACA,CApCA,IAsCA,CAvCA,EAwCA,CA7DA,EAgEA;AACA,+CACA,gBACA,kBACA,UADA,IAGA,qCACA;AACA,0BACA,4BACA,sBACA,kBACA,iFACA,2EACA,sBACA;AAEA,WAHA,MAGA,sBACA;AACA,sCACA,CAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAPA,MAOA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA,WAHA,MAGA;AACA;;AAEA,WAHA,MAGA;AACA;;AAEA,WAHA,MAGA;AACA;;AAEA,WAHA,MAGA;AACA;;AAEA,WAHA,MAGA;AACA;;AAEA;AACA;AACA,OA5CA,EA4CA,KA5CA,CA4CA;AACA;AACA,OA9CA;AA+CA,KArHA;AAsHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CADA;;AAGA,eAJA,EAIA,IAJA;AAKA;AACA,WAVA;AAWA,SAZA,EAYA,KAZA;AAaA;AACA,KAxIA;AAyIA;AACA;AACA;AACA,qBADA;AAEA;AACA;AACA,SAJA;;AAMA,KAjJA;;AAmJA;AACA;AACA;AACA,kBADA;;AAGA;AACA,2EADA;AAEA,+EAFA;AAGA;AACA,uCADA,EAHA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAdA;AAeA;AACA;AACA;AACA;AACA,SAnBA;;;;;AAwBA,KAhLA;AAiLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBADA;AAEA;AACA;AACA,SAJA;;AAMA;AACA;AACA;AACA,uBADA;AAEA;AACA;AACA;AACA;AACA,WANA;;AAQA,OAVA,EAUA,KAVA;AAWA,KAzMA;AA0MA;AACA;AACA;AACA;AACA,kBADA;;AAGA;AACA,8EADA;AAEA,kFAFA;AAGA;AACA,uCADA,EAHA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDADA;;AAGA,WAPA,MAOA;AACA;AACA;AACA,SAlBA;AAmBA;AACA;AACA;AACA;AACA,SAvBA;;AAyBA,KAzOA;AA0OA;AACA;AACA;AACA;AACA,yCADA;;AAGA,KAhPA;AAiPA;AACA;AACA;AACA;AACA;AACA;AACA,KAvPA;;AAyPA;AACA;AACA;AACA;AACA,KA7PA;AA8PA;AACA;AACA;AACA,KAjQA;AAkQA;AACA;AACA;AACA;AACA,KAtQA;AAuQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,uBAFA;AAGA;AACA;AACA;AACA,WANA;AAOA;AACA;AACA,WATA;;AAWA,OAZA,EAYA,IAZA,CAYA;AACA;AACA,mEADA;AAEA,uEAFA;AAGA;AACA,yCADA;AAEA,kCAFA;AAGA,iCAHA;AAIA,sDAJA;AAKA,yCALA;AAMA,uCANA;AAOA,yCAPA,CAOA;AAPA,WAHA;AAYA;AACA;AACA;AACA;AACA,6BADA;AAEA,4BAFA;AAGA;AACA;AACA,iBALA;;AAOA,aARA,MAQA;AACA;AACA;AACA,WAzBA;AA0BA;AACA;AACA;AACA,WA7BA;;AA+BA,OA5CA;AA6CA,KA1TA;;AA4TA;AACA;AACA;AACA,KA/TA;AAgUA;AACA;AACA;AACA,wFADA;AAEA,4FAFA;AAGA;AACA,uCADA,EAHA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA,2CADA;;AAGA,aAJA,EAIA,IAJA;AAKA,WAPA,MAOA;AACA;AACA;AACA;AACA,SAnBA;AAoBA;AACA;AACA;AACA,SAvBA;;AAyBA,KA3VA;;AA6VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cADA;AAEA,qBAFA;AAGA,sBAHA;AAIA,0BAJA;AAKA,oBALA;AAMA,sBANA;;AAQA;AACA,KA7WA;;;AAgXA;AACA;AACA;AACA;AACA,6CADA;AAEA;AACA,kCADA;AAEA,8BAFA,EAFA;;AAMA,qBANA;AAOA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,8BAFA;;AAIA;AACA;AACA;AACA,+BADA;AAEA,4BAFA;AAGA,2BAHA;AAIA,oBAJA;;AAMA;AACA,SAvCA;AAwCA;AACA;AACA,SA1CA;;AA4CA,KA/ZA;AAgaA;AACA;AACA;AACA,KAnaA;AAoaA;AACA;AACA;AACA;AACA,KAxaA;AAyaA;AACA;AACA,sEAFA,CAEA;AACA,wEAHA,CAGA;AACA,gEAJA,CAIA;AACA,wEALA,CAKA;AACA,oEANA,CAMA;AACA,0EAPA,CAOA;AACA,sEARA,CAQA;AACA;AACA,KAnbA;AAobA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,EAKA,KALA;AAMA;AACA,KAncA,EA9EA,E;;;;;;;;;;;;;ACpJA;AAAA;AAAA;AAAA;AAA07B,CAAgB,y6BAAG,EAAC,C;;;;;;;;;;;ACA98B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAA8rC,CAAgB,gpCAAG,EAAC,C;;;;;;;;;;;ACAltC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/ZXC/CzcPrivate.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/ZXC/CzcPrivate.nvue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./CzcPrivate.nvue?vue&type=template&id=3971a467&\"\nvar renderjs\nimport script from \"./CzcPrivate.nvue?vue&type=script&lang=js&\"\nexport * from \"./CzcPrivate.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./CzcPrivate.nvue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./CzcPrivate.nvue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"HBuilderProjects/jdt-jsd/pages/ZXC/CzcPrivate.nvue\"\nexport default component.exports","export * from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./CzcPrivate.nvue?vue&type=template&id=3971a467&\"","var components = {\n  uniPopup: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n    )\n  },\n  uniIcons: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.formatEstimateDistance(_vm.estimateDistance)\n  var m1 = _vm.formatEstimateTime(_vm.estimateTime)\n  var m2 = _vm.formatEstimateDistance(_vm.estimateDistance)\n  var m3 = _vm.formatEstimateTime(_vm.estimateTime)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./CzcPrivate.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./CzcPrivate.nvue?vue&type=script&lang=js&\"","<style>\n  view,\n  swiper-item,\n  scroll-view {\n    display:flex;\n    flex-direction:column;\n    flex-shrink: 0;\n    flex-grow: 0;\n    flex-basis: auto;\n    align-items: stretch;\n    align-content: flex-start;\n  }\n  view,\n  image,\n  input,\n  scroll-view,\n  swiper,\n  swiper-item,\n  text,\n  textarea,\n  video {\n    position: relative;\n    border: 0px solid #000000;\n    box-sizing: border-box;\n  }\n  swiper-item {\n    position: absolute;\n  }\n</style>\n<template>\r\n\t<view>\r\n\t\t<map id=\"map1\" ref=\"map1\" class=\"map\" :style=\"{height:mapHeight}\" :scale=\"scale\" :longitude=\"longitude\" :latitude=\"latitude\"\r\n\t\t :polyline=\"polyline\" :markers=\"markers\" :show-location=\"true\">\r\n\t\t</map>\r\n\t\t<image @click=\"back\" src=\"../../static/driver/back1.png\" style=\"width: 120rpx;height: 120rpx;position: fixed;top: 50px;left: 1px;\"></image>\r\n\t\t<view v-if=\"state == 2\" style=\"position: fixed;bottom: 220rpx; \">\r\n\t\t\t<view style=\"flex-direction: row;justify-content: space-between;align-items: center;\">\r\n\t\t\t\t<view style=\"flex-direction: row;\">\r\n\t\t\t\t\t<image src=\"../../static/driver/police.png\" style=\"width: 120rpx;height: 120rpx;margin-left: 10rpx;\" @click=\"callPolice\"></image>\r\n\t\t\t\t\t<image src=\"../../static/driver/message.png\" style=\"width: 120rpx;height: 120rpx;margin-left: 10rpx;\" @click=\"sendMessage\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"border-radius: 9rpx;text-align: center;\">\r\n\t\t\t\t\t<view style=\"background-color: #FFFFFF;padding: 20rpx;border-radius: 10rpx;\">\r\n\t\t\t\t\t\t<text @click=\"cancleOrder()\" style=\"font-size:30rpx;font-family:Source Han Sans SC;font-weight:300;color:rgba(51,51,51,1);\">取消订单</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 行程信息 -->\r\n\t\t\t<view style=\"width: 698rpx;height: 223rpx; background-color: #FFFFFF;margin-left: 28rpx; border-radius:20rpx;\">\r\n\t\t\t\t<view style=\"margin-top: 36rpx;margin-left: 38rpx;display: flex;flex-direction: row;\">\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">预计里程:</text>\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">{{formatEstimateDistance(estimateDistance)}}</text>\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx; margin-left: 40rpx;\">预计时长:</text>\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">{{formatEstimateTime(estimateTime)}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"margin-top: 20rpx;margin-left: 40rpx;display: flex;flex-direction: row;\">\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">等待时长:</text>\r\n\t\t\t\t\t<text style=\"width:400rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">{{waitTime}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"margin-top: 20rpx;margin-left: 36rpx;display: flex;flex-direction: row;\">\r\n\t\t\t\t\t<text style=\"width:110rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">上车点:</text>\r\n\t\t\t\t\t<text style=\"width:400rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">{{startAddress}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 联系电话 -->\r\n\t\t\t<view style=\"width: 698rpx;height: 105rpx; background-color: #FFFFFF;margin-left: 28rpx; border-radius:20rpx; padding: 34rpx;display: flex;flex-direction: row;margin-top: 20rpx;\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<text style=\"width:140rpx;height:36rpx;font-size:30rpx;font-family:Source Han Sans SC;font-weight:300;color:rgba(51,51,51,1);line-height:36rpx; margin-left: 10rpx;\">乘客电话:</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<text style=\"width:200rpx;height:36rpx;font-size:30rpx;font-family:Source Han Sans SC;font-weight:300;color:rgba(51,51,51,1);line-height:36rpx;\">{{passengersPhone}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<image style=\"width: 60rpx;height: 60rpx; left: 220rpx; top: -12rpx;\" src=\"../../static/driver/phone.png\" @click=\"call\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view>\r\n\t\t\t\t<button style=\"width: 698rpx;height: 105rpx;background-color: #FC6A6C;border-color:#FC6A6C;color: #FFFFFF;margin-left: 28rpx; border-radius:20rpx; position: fixed; padding: 6rpx;bottom: 90rpx;\"\r\n\t\t\t\t @longpress=\"confirmgetonCar\">\r\n\t\t\t\t\t<text style=\"color: #FFFFFF;\">长按确认乘客已上车</text>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-if=\"state == 4\" style=\"position: fixed;bottom: 220rpx; \">\r\n\t\t\t<view style=\"flex-direction: row;\">\r\n\t\t\t\t<image src=\"../../static/driver/police.png\" style=\"width: 120rpx;height: 120rpx;margin-left: 10rpx;\" @click=\"callPolice\"></image>\r\n\t\t\t\t<image src=\"../../static/driver/message.png\" style=\"width: 120rpx;height: 120rpx;margin-left: 10rpx;\" @click=\"sendMessage\"></image>\r\n\t\t\t</view>\r\n\t\t\t<!-- 行程信息 -->\r\n\t\t\t<view style=\"width: 698rpx;height: 164rpx; background-color: #FFFFFF;margin-left: 28rpx; border-radius:20rpx;\">\r\n\t\t\t\t<view style=\"margin-top: 36rpx;margin-left: 38rpx;display: flex;flex-direction: row;\">\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">预计里程:</text>\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">{{formatEstimateDistance(estimateDistance)}}</text>\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx; margin-left: 40rpx;\">预计时长:</text>\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">{{formatEstimateTime(estimateTime)}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"margin-top: 20rpx;margin-left: 40rpx;display: flex;flex-direction: row;\">\r\n\t\t\t\t\t<text style=\"width:120rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">下车点:</text>\r\n\t\t\t\t\t<text style=\"width:400rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">{{endAddress}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"width: 698rpx; background-color: #FFFFFF;margin-left: 28rpx; border-radius:20rpx; margin-top: 30rpx;padding-bottom: 30rpx;\">\r\n\t\t\t\t<view style=\"margin-top: 36rpx;margin-left: 38rpx;display: flex;flex-direction: row;\">\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">剩余里程:</text>\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">{{distance}}</text>\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;margin-left: 40rpx;\">已驶时长:</text>\r\n\t\t\t\t\t<text style=\"width:140rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">{{alreadyTime}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"margin-top: 20rpx;margin-left: 40rpx;display: flex;flex-direction: row;\">\r\n\t\t\t\t\t<text style=\"width:120rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">总费用:</text>\r\n\t\t\t\t\t<text style=\"width:400rpx;height:40rpx;font-size:30rpx;font-family:Source Han Sans SC;color:#666666;line-height:36rpx;\">{{factPayPrice}}元</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view>\r\n\t\t\t\t<button style=\"width: 698rpx;height: 105rpx;background-color: #FC6A6C;border-color:#FC6A6C;margin-left: 28rpx; border-radius:20rpx; position: fixed; padding: 6rpx;bottom: 90rpx;\"\r\n\t\t\t\t @longpress=\"confirmGetToDestination\">\r\n\t\t\t\t\t<text style=\"color: #FFFFFF;\">长按确认到达目的地</text>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<uni-popup ref='callPolice' :animation='true' type='center' :maskClick='false'>\r\n\t\t\t<!--一键报警-->\r\n\t\t\t<view class=\"popupBlock\" style=\"margin: 0 auto;\">\r\n\t\t\t\t<view class=\"popupTitle\">\r\n\t\t\t\t\t<view style=\"width: 72rpx;\"></view>\r\n\t\t\t\t\t<text class=\"popupTitleFont\">一键报警</text>\r\n\t\t\t\t\t<uni-icons @click=\"cancle\" color='#999999' size='24' type='closeempty'></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<picker @change='pickerChange' mode=\"selector\" :value=\"pickerValue\" :range='callPoliceArr' style=\"align-items: center;\">\r\n\t\t\t\t\t\t<text class=\"popupTitleFont\" style=\"text-align: center;\">{{alarmReason}}</text>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t\t<textarea style=\"margin-top: 20rpx;\" name='alarmRemark' v-model=\"alarmRemark\" placeholder=\"备注,可不填\"></textarea>\r\n\t\t\t\t\t<button @click=\"sendCall\" class=\"popupButtonOk\">\r\n\t\t\t\t\t\t<text class=\"popupButtonOkFont\">确定</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport $CzcPrivate from '../../common/CzcPrivate.js';\r\n\timport $taxi from '../../common/Czc.js'\r\n\timport $home from '../../common/Home.js'\r\n\timport uniIcons from \"@/components/uni-icons/uni-icons.vue\";\r\n\timport Map from '../../common/my-openMap/openMap.js';\r\n\timport uniPopup from \"@/components/uni-popup/uni-popup.vue\"\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tuniIcons,\r\n\t\t\tuniPopup\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tscale: 14,\r\n\t\t\t\tlongitude: \"\", //地图中心点经度\r\n\t\t\t\tlatitude: \"\", //地图中心点纬度\r\n\t\t\t\tpoints: [],\r\n\t\t\t\tpolyline: [],\r\n\t\t\t\tmarkers: [],\r\n\t\t\t\tmapHeight: '',\r\n\t\t\t\tviewHeight: '',\r\n\t\t\t\tdirectionInterval: 0,\r\n\t\t\t\torderInterval: 0,\r\n\t\t\t\twaitTimeInterval:0,\r\n\t\t\t\tcallPoliceArr: [\r\n\t\t\t\t\t'车辆损坏',\r\n\t\t\t\t\t'身体不适'\r\n\t\t\t\t],\r\n\t\t\t\talarmReason: '请选择报警原因',//报警原因\r\n\t\t\t\tpickerValue: 0,\r\n\t\t\t\talarmRemark: '',//报警备注\r\n\t\t\t\tdriverId: '',\r\n\r\n\t\t\t\torderNumber: '', //订单编号\r\n\t\t\t\tstate: 0,\r\n\t\t\t\tstartLon: '',\r\n\t\t\t\tstartLat: '',\r\n\t\t\t\tstartAddress: '',\r\n\t\t\t\tendLon: '',\r\n\t\t\t\tendLat: '',\r\n\t\t\t\tendAddress: '',\r\n\t\t\t\torderType: '',\r\n\t\t\t\tpassengersPhone: '',\r\n\t\t\t\tvehicleType: '',\r\n\t\t\t\tappointmentTime: '', //预约时间\r\n\t\t\t\testimatePrice: '', //预计价格\r\n\t\t\t\testimateDistance: '', //预计里程\r\n\t\t\t\testimateTime: '', //预计时长\r\n\t\t\t\talreadyTime: '0分钟', //已驶时长\r\n\t\t\t\talreadyMileage: '', //已驶里程\r\n\t\t\t\twaitTime: '0分钟', //等待时长\r\n\t\t\t\tinitialMin:'',\r\n\t\t\t\tfactPayPrice: '', //总价\r\n\t\t\t\tsetoutTime:'',//出发去接旅客的时间\r\n\t\t\t\trunTime:'',//开始执行的时间\r\n\t\t\t\t\r\n\t\t\t\tdistance:'',//剩余里程\r\n\t\t\t\tuserInfo:null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tvar that = this;\r\n\t\t\tthat.orderNumber = option.orderNumber;\r\n\t\t\tvar userInfo = uni.getStorageSync('userInfo') || '';\r\n\t\t\tif (userInfo) {\r\n\t\t\t\tthat.userInfo = userInfo;\r\n\t\t\t\tthat.driverId = userInfo.driverId;\r\n\t\t\t}\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\t//设置地图高度为可使用的高度\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tthat.mapHeight = res.windowHeight + 'px';\r\n\t\t\t\t\tthat.viewHeight = (res.windowHeight * 0.4) + 'px'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthat.setOrderStatus();\r\n\t\t\tthat.getMyLocation();\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tlet that = this;\r\n\t\t\tclearInterval(that.orderInterval);\r\n\t\t\tclearInterval(that.waitTimeInterval);\r\n\t\t\tclearInterval(that.directionInterval);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetMyLocation:function(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype:'gcj02',\r\n\t\t\t\t\tsuccess:function(res){\r\n\t\t\t\t\t\tthat.longitude = res.longitude;\r\n\t\t\t\t\t\tthat.latitude = res.latitude;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//本页面统一调用此方法\r\n\t\t\tshowToast:function(title,icon='none'){\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:title,\r\n\t\t\t\t\ticon:icon\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetOrder: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: $CzcPrivate.Interface.GetSpecialLineOrderByOrderNumber_Driver.value,\r\n\t\t\t\t\t\tmethod: $CzcPrivate.Interface.GetSpecialLineOrderByOrderNumber_Driver.method,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tOrdernumber: that.orderNumber,\r\n\t\t\t\t\t\t\tDriverId:that.driverId \r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tlet data = res.data.data[0];\r\n\t\t\t\t\t\t\tif (res.data.status) {\r\n\t\t\t\t\t\t\t\tthat.startLon = data.StartLon;\r\n\t\t\t\t\t\t\t\tthat.startLat = data.StartLat;\r\n\t\t\t\t\t\t\t\tthat.startAddress = data.StartAddress;\r\n\t\t\t\t\t\t\t\tthat.endLon = data.EndLon;\r\n\t\t\t\t\t\t\t\tthat.endLat = data.EndLat;\r\n\t\t\t\t\t\t\t\tthat.endAddress = data.EndAddress;\r\n\t\t\t\t\t\t\t\tthat.state = data.State;\r\n\t\t\t\t\t\t\t\tthat.orderType = data.OrderType;\r\n\t\t\t\t\t\t\t\tthat.passengersPhone = data.PassengersPhone;\r\n\t\t\t\t\t\t\t\tthat.vehicleType = data.VehicleType;\r\n\t\t\t\t\t\t\t\tthat.appointmentTime = data.AppointmentTime;\r\n\t\t\t\t\t\t\t\tthat.estimatePrice = data.EstimatePrice;\r\n\t\t\t\t\t\t\t\tthat.estimateDistance = data.EstimateDistance;\r\n\t\t\t\t\t\t\t\tthat.estimateTime = data.EstimateTime;\r\n\t\t\t\t\t\t\t\tthat.factPayPrice = data.FactPayPrice;\r\n\t\t\t\t\t\t\t\tthat.runTime = data.RunTime.replace('T', ' ').replace(/-/g,'/').substring(0,19);\r\n\t\t\t\t\t\t\t\tthat.setoutTime = data.SetOutTime.replace('T', ' ').replace(/-/g,'/').substring(0,19);\r\n\t\t\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.showToast(res.data.msg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\t\treject(res);\r\n\t\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\t\tthat.showToast('网络连接失败');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\r\n\t\t\t//订单查询方法，第一次进入时调用。\r\n\t\t\tsetOrderStatus: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask:true\r\n\t\t\t\t})\r\n\t\t\t\tthat.getOrder().then(res => {\r\n\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tvar data = res.data.data[0];\r\n\t\t\t\t\tif (res.data.status) {\r\n\t\t\t\t\t\tthat.markers = [];\r\n\t\t\t\t\t\tthat.setMarker(1, that.startLon, that.startLat, '../../static/driver/Start.png');\r\n\t\t\t\t\t\tthat.setMarker(2, that.endLon, that.endLat, '../../static/driver/End.png');\r\n\t\t\t\t\t\tif (that.state == 0) {\r\n\t\t\t\t\t\t\t//等待接单\r\n\r\n\t\t\t\t\t\t} else if (that.state == 1) {\r\n\t\t\t\t\t\t\t//司机已接单\r\n\t\t\t\t\t\t\tthat.realGetOrderDetail();\r\n\t\t\t\t\t\t} else if (that.state == 2) {\r\n\t\t\t\t\t\t\t//司机已出发 \r\n\t\t\t\t\t\t\tMap.openMap(that.startLat, that.startLon, that.startAddress, 'gcj02');\r\n\t\t\t\t\t\t\tthat.realGetOrderDetail();\r\n\t\t\t\t\t\t\t//规划司机到出发地路程\r\n\t\t\t\t\t\t\tthat.setToStart();\r\n\t\t\t\t\t\t\tthat.mathWaitTime(new Date(that.setoutTime)); \r\n\t\t\t\t\t\t} else if (that.state == 3) {\r\n\t\t\t\t\t\t\t//司机已到出发地\r\n\t\t\t\t\t\t\t//预留\r\n\t\t\t\t\t\t} else if (that.state == 4) {\r\n\t\t\t\t\t\t\t//订单执行中（接到旅客）\r\n\t\t\t\t\t\t\tthat.setConfirmgetonCar();\r\n\t\t\t\t\t\t} else if (that.state == 5) {\r\n\t\t\t\t\t\t\t//待支付\r\n\r\n\t\t\t\t\t\t} else if (that.state == 6) {\r\n\t\t\t\t\t\t\t//支付完成\r\n\r\n\t\t\t\t\t\t} else if (that.state == 7) {\r\n\t\t\t\t\t\t\t//司机取消订单\r\n\r\n\t\t\t\t\t\t} else if (that.state == 8) {\r\n\t\t\t\t\t\t\t//乘客取消订单\r\n\r\n\t\t\t\t\t\t} else if (that.state == 9) {\r\n\t\t\t\t\t\t\t//支付失败\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(rej =>{\r\n\t\t\t\t\tuni.hideLoading(); \r\n\t\t\t\t}) ;\r\n\t\t\t},\r\n\t\t\trealGetOrderDetail: function() {\r\n\t\t\t\t//循环查找订单数据\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif( that.orderInterval == 0){\r\n\t\t\t\t\tthat.orderInterval = setInterval(function() {\r\n\t\t\t\t\t\tthat.getOrder().then(res =>{\r\n\t\t\t\t\t\t\tif (that.state == 8) {\r\n\t\t\t\t\t\t\t\tclearInterval(that.orderInterval);\r\n\t\t\t\t\t\t\t\tthat.showToast('用户已取消订单');\r\n\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\turl:'../driver/taxiDriver'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t},1500);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 10000);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetToStart:function(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype:'gcj02',\r\n\t\t\t\t\tsuccess:function(res){\r\n\t\t\t\t\t\tthat.getDirectionDriving(res.longitude + ',' + res.latitude,that.startLon + ',' + that.startLat);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tconfirmgetonCar: function() { //长按确认乘客上车\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask:true\r\n\t\t\t\t});\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:$CzcPrivate.Interface.RunSpecialLineOrder_Driver.value,\r\n\t\t\t\t\tmethod:$CzcPrivate.Interface.RunSpecialLineOrder_Driver.method,\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tOrderNumber:that.orderNumber\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess:function(res){\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tthat.runTime = data.RunTime.replace('T', ' ').replace(/-/g,'/').substring(0,19);\r\n\t\t\t\t\t\tthat.setConfirmgetonCar();\r\n\t\t\t\t\t\tthat.state = 4;\r\n\t\t\t\t\t\tMap.openMap(that.endLat, that.endLon, that.endAddress, 'gcj02');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:function(res){\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\tthat.showToast('网络连接失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tsetConfirmgetonCar:function(){\r\n\t\t\t\t//确认乘客上车\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tclearInterval(that.orderInterval);\r\n\t\t\t\tthat.orderInterval = 0;\r\n\t\t\t\tthat.mathWaitTime(new Date(that.runTime));\r\n\t\t\t\tthat.polyline = []; \r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype:'gcj02',\r\n\t\t\t\t\tsuccess:function(res){\r\n\t\t\t\t\t\tthat.getDirectionDriving(res.longitude + ',' + res.latitude,that.endLon + ',' + that.endLat);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthat.directionInterval = setInterval(function() { //获取司机的实时位置并规划到终点的路线\r\n\t\t\t\t\tthat.polyline = [];\r\n\t\t\t\t\tuni.getLocation({\r\n\t\t\t\t\t\ttype: 'gcj02',\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tthat.longitude = res.longitude;\r\n\t\t\t\t\t\t\tthat.latitude = res.latitude;\r\n\t\t\t\t\t\t\tthat.getDirectionDriving(res.longitude + ',' + res.latitude,that.endLon + ',' + that.endLat);\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t})\r\n\t\t\t\t}, 10000);\r\n\t\t\t},\r\n\t\t\tconfirmGetToDestination: function() {\r\n\t\t\t\t//长按确认到达目的地\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask:true\r\n\t\t\t\t});\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:$CzcPrivate.Interface.FinishSpecialLineOrder_Driver.value,\r\n\t\t\t\t\tmethod:$CzcPrivate.Interface.FinishSpecialLineOrder_Driver.method,\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tOrderNumber:that.orderNumber\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess:function(res){\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif(res.data.status){\r\n\t\t\t\t\t\t\t//取消由 setInterval 设置的定时器\r\n\t\t\t\t\t\t\tclearInterval(that.directionInterval);\r\n\t\t\t\t\t\t\tgetApp().globalData.orderNumber = 0;\r\n\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\turl: '/pages/driver/orderComplete',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.showToast(res.data.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:function(res){\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\tthat.showToast('网络连接失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcall: function() {\r\n\t\t\t\t//呼叫乘客\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.makePhoneCall({\r\n\t\t\t\t\tphoneNumber: that.passengersPhone\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsendMessage:function(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tvar msg = plus.messaging.createMessage(plus.messaging.TYPE_SMS);\r\n\t\t\t\tmsg.to=[that.passengersPhone];\r\n\t\t\t\tmsg.body = '你好，我是您的专线车司机' + that.userInfo.userName.substring(0,1) + '师傅，';\r\n\t\t\t\tplus.messaging.sendMessage(msg);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//picker相关\r\n\t\t\tcallPolice: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.$refs.callPolice.open();\r\n\t\t\t},\r\n\t\t\tcancle: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.$refs.callPolice.close();\r\n\t\t\t},\r\n\t\t\tpickerChange: function(e) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.pickerValue = e.detail.value;\r\n\t\t\t\tthat.alarmReason = that.callPoliceArr[e.detail.value];\r\n\t\t\t},\r\n\t\t\tsendCall: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (that.alarmReason === '请选择报警原因') {\r\n\t\t\t\t\tthat.showToast('请选择报警原因');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnew Promise((resolve, rejected) => {\r\n\t\t\t\t\tuni.getLocation({\r\n\t\t\t\t\t\ttype: 'gcj02',\r\n\t\t\t\t\t\tgeocode: true,\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(rej) {\r\n\t\t\t\t\t\t\trejected(rej);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}).then(resolve => {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: $home.Interface.addDriverOneTouchAlarm.value,\r\n\t\t\t\t\t\tmethod: $home.Interface.addDriverOneTouchAlarm.method,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\torderNumber: that.orderNumber,\r\n\t\t\t\t\t\t\tlon: resolve.longitude,\r\n\t\t\t\t\t\t\tlat: resolve.latitude,\r\n\t\t\t\t\t\t\taddress: that.packAddress(resolve.address), \r\n\t\t\t\t\t\t\talarmReason: that.alarmReason,\r\n\t\t\t\t\t\t\tdriverNumber: that.driverId,\r\n\t\t\t\t\t\t\talarmRemark: that.alarmRemark //报警备注\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\t\tif (res.data.status) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '报警成功',\r\n\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\tthat.cancle();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.showToast(res.data.msg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\t\tthat.showToast('网络连接中断');\r\n\t\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tback: function() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.navigateBack({});\r\n\t\t\t},\r\n\t\t\tcancleOrder:function(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:$CzcPrivate.Interface.CancelSpecialLineOrderByOrderNum_Driver.value,\r\n\t\t\t\t\tmethod:$CzcPrivate.Interface.CancelSpecialLineOrderByOrderNum_Driver.method,\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tOrderNumber:that.orderNumber\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess:function(res){\r\n\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\tif(res.data.status){\r\n\t\t\t\t\t\t\tthat.showToast('取消成功');\r\n\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\turl:'../driver/taxiDriver'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},1500);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.showToast(res.data.msg);\r\n\t\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:function(res){\r\n\t\t\t\t\t\tthat.showToast('网络连接失败');\r\n\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsetMarker: function(id, lon, lat, iconPath) {\r\n\t\t\t\tvar width = 20;\r\n\t\t\t\tvar height = 20;\r\n\t\t\t\t//描绘点的方法\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar marker = new Object();\r\n\t\t\t\t//画终点经纬度\r\n\t\t\t\tmarker = {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tlatitude: lat,\r\n\t\t\t\t\tlongitude: lon,\r\n\t\t\t\t\ticonPath: iconPath,\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height\r\n\t\t\t\t};\r\n\t\t\t\tthat.markers.push(marker);\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetDirectionDriving: function(startLonLat, endLonLat) {\r\n\t\t\t\t//调用高德api取得路径规划并绘制线路 \r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: $taxi.InterfaceAddress[0],\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tstartLonLat: startLonLat,\r\n\t\t\t\t\t\tendLonLat: endLonLat,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t//日后会加入定时，此处需清空\r\n\t\t\t\t\t\tthat.points = [];\r\n\t\t\t\t\t\tthat.polyline = [];\r\n\r\n\t\t\t\t\t\tvar polylineArr = [];\r\n\t\t\t\t\t\tvar points = [];\r\n\t\t\t\t\t    that.distance =  (parseInt(res.data.Distance) / 1000).toFixed(2) + '公里';\r\n\t\t\t\t\t\tpolylineArr = res.data.Polyline;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < polylineArr.length; i++) {\r\n\t\t\t\t\t\t\tvar arr = polylineArr[i].split(';');\r\n\t\t\t\t\t\t\tfor (var j = 0; j < arr.length; j++) {\r\n\t\t\t\t\t\t\t\tpoints.push(arr[j]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//根据文件建设对象经纬度数组\r\n\t\t\t\t\t\tfor (var i = 0; i < points.length; i++) {\r\n\t\t\t\t\t\t\tvar arr = points[i].split(',');\r\n\t\t\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\t\t\tlongitude: arr[0],\r\n\t\t\t\t\t\t\t\tlatitude: arr[1]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.points.push(obj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\t\tpoints: that.points,\r\n\t\t\t\t\t\t\tcolor: \"#4BDD25\",\r\n\t\t\t\t\t\t\tarrowLine: true,\r\n\t\t\t\t\t\t\twidth: 5\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthat.polyline.push(obj);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tformatEstimateDistance: function(estimateDistance) {\r\n\t\t\t\t//公里数\r\n\t\t\t\treturn estimateDistance + '公里';\r\n\t\t\t},\r\n\t\t\tformatEstimateTime: function(estimateTime) {\r\n\t\t\t\t//格式化时间\r\n\t\t\t\tlet time = (estimateTime / 60) > 1 ? ((estimateTime / 60) + '小时') : (estimateTime + '分钟');\r\n\t\t\t\treturn time\r\n\t\t\t},\r\n\t\t\tpackAddress:function(value){\r\n\t\t\t\t//组装地址\r\n\t\t\t\tvar country = value.country=='undefined'?'': value.country;//国家\r\n\t\t\t\tvar province = value.country=='undefined'?'': value.province;//省份\r\n\t\t\t\tvar city = value.country=='undefined'?'': value.city;//城市\r\n\t\t\t\tvar district = value.country=='undefined'?'': value.district;//区\r\n\t\t\t\tvar street = value.country=='undefined'?'': value.street;//街道\r\n\t\t\t\tvar streetNum = value.country=='undefined'?'': value.streetNum;//门牌\r\n\t\t\t\tvar poiName = value.country=='undefined'?'': value.poiName;//POI\r\n\t\t\t\treturn country + province + city + district + street + streetNum + poiName;\r\n\t\t\t},\r\n\t\t\t//计算等待时间\r\n\t\t\tmathWaitTime:function(startTime){\r\n\t\t\t\tlet that = this;\r\n\t\t\t    var initialSec = new Date().getTime() - startTime.getTime(); \r\n\t\t\t\tthat.initialMin = parseInt(initialSec / 1000 / 60) ;\r\n\t\t\t\tthat.waitTime = (parseInt(that.initialMin/60) + '小时') + (that.initialMin % 60 + '分钟'); \r\n\t\t\t\tthat.alreadyTime = (parseInt(that.initialMin/60) + '小时') + (that.initialMin % 60 + '分钟');\r\n\t\t\t\tclearInterval(that.waitTimeInterval);\r\n\t\t\t\tthat.waitTimeInterval = setInterval(function(){\r\n\t\t\t\t\tthat.initialMin = that.initialMin + 1;\r\n\t\t\t\t\tthat.waitTime = (parseInt(that.initialMin/60) + '小时') + (that.initialMin % 60 + '分钟');\r\n\t\t\t\t\tthat.alreadyTime = (parseInt(that.initialMin/60) + '小时') + (that.initialMin % 60 + '分钟')\r\n\t\t\t\t\t//\t\t\t\t\t\tthat.waitTime = that.initialMin / 60 > 0 ? (parseInt(that.initialMin/60) + '小时') + (that.initialMin % 60 + '分钟') : that.initialMin + '分钟'\r\n\t\t\t\t},60000);\r\n\t\t\t\t//console.log('打开定时器：' + that.waitTimeInterval);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.map {\r\n\t\twidth: 750rpx;\r\n\t}\r\n\r\n\t.popupBlock {\r\n\t\twidth: 650rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tborder-radius: 12rpx;\r\n\t}\r\n\r\n\t.popupTitle {\r\n\t\tmargin-bottom: 50rpx;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.popupTitleFont {\r\n\t\tfont-size: 38rpx;\r\n\t\tfont-family: Source Han Sans SC;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.popupButtonChoose {\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tborder-color: #AAAAAA;\r\n\t\tborder-width: 1rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t}\r\n\r\n\t.popupButtonChooseFont {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-family: Source Han Sans SC;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.popupButtonOk {\r\n\t\tmargin-top: 50rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground-color: #FC6A6C;\r\n\t\tbox-shadow: 0px 7px 38px 8px rgba(216, 48, 75, 0.15);\r\n\t\tborder-radius: 12rpx;\r\n\t}\r\n\r\n\t.popupButtonOkFont {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-family: Source Han Sans SC;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #FFFFFF;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./CzcPrivate.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./CzcPrivate.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1592187276314\n      var cssReload = require(\"D:/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./CzcPrivate.nvue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./CzcPrivate.nvue?vue&type=style&index=1&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1592187276695\n      var cssReload = require(\"D:/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}